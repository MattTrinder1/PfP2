parameters:
- name: connectionstring
  type: string
- name: pipelineworkspace
  type: string
- name: SolutionFileName
  type: string
- name: FileExists
  type: string

steps:

  - ${{if eq(parameters.FileExists,'True') }}:
    - ${{ each parameter in parameters }}:
      - ${{ if contains(parameter.Value, 'FileName') }}:
        - task: MSCRMImportSolution@11
          displayName: '${{parameter.Value}}'
          inputs:
              crmConnectionString: ${{parameters.connectionstring}}
              solutionFile: '${{parameters.pipelineworkspace}}/${{parameter.Value}}'
              overwriteUnmanagedCustomizations: true
              publishWorkflows: true
              useAsyncMode: false
              asyncWaitTimeout: 1500

